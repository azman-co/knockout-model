!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(require("knockout"),module.exports||exports):"function"==typeof define&&define.amd?define(["knockout","exports"],a):a(ko,window.knockOutModel={})}(function(a,b){function c(a,b){return a?("object"==typeof a&&a.constructor&&(a=a.constructor),"function"==typeof a&&(a=a.toString()),a===b):!1}function d(a,b){if(a=a||[],"string"==typeof a&&(a=[a]),"number"==typeof a.length){for(var c=0;c<a.length;c++)if(b(c,a[c])===!1)return}else for(var d in a)if(b(d,a[d])===!1)return}function e(b){return a.computed({read:function(){return b},write:function(a){b.from(a)},owner:b})}function f(a,c){d(c,function(c,d){if(b.isModel(d)||b.isCollection(d))return void(a.relations[c]=d);if("function"==typeof d){var e,f;return b.isReader(c)?(e=b.fromReader(c),f="read"):b.isWriter(c)&&(e=b.fromWriter(c),f="write"),f?("undefined"==typeof a.computed[e]&&(a.computed[e]={}),void(a.computed[e][f]=d)):void(a.methods[c]=d)}a.properties[c]=d})}function g(a){a.observer=e(a),h(a),i(a),j(a),k(a)}function h(b){d(b.$self.computed,function(c,d){b[c]=a.computed({owner:b,deferEvaluation:!0,read:d.read||function(){},write:d.write||function(){}})})}function i(a){d(a.$self.methods,function(b,c){a[b]=function(){return c.apply(a,arguments)}})}function j(b){d(b.$self.properties,function(c,d){b[c]="[object Array]"===Object.prototype.toString.call(d)?a.observableArray(d):a.observable(d)})}function k(a){d(a.$self.relations,function(b,c){var d=new c;a[b]=d.observer,d.$parent=a})}if("undefined"==typeof a)throw"KnockoutJS is required. Download at https://github.com/SteveSanderson/knockout.";b.bindings={model:function(b,c){this.attr(b,"view")||a.applyBindings(this.get(c),b)}},b.collection=function(a){var c=function(c){Array.prototype.push.apply(this,[]),this.observer=e(this),this.aggregate=function(a,b){var c=[];return b||(b=[a],a=""),this.each(function(e,f){var g=[];d(b,function(a,b){"function"==typeof f[b]&&g.push(f[b]())}),c.push(g.join(a))}),c},this.at=function(a){return"undefined"==typeof this[a]?!1:this[a]},this.first=function(){return this.at(0)},this.last=function(){return this.at(this.length-1)},this.has=function(a){return"undefined"!=typeof this[a]},this.remove=function(a){return a="number"==typeof a?a:this.index(a),this.has(a)&&(Array.prototype.splice.call(this,a,1),this.observer.notifySubscribers()),this},this.empty=function(){return Array.prototype.splice.call(this,0,this.length),this.observer.notifySubscribers(),this},this.prepend=function(a){return this.insert(0,a)},this.append=function(a){return this.insert(this.length,a)},this.insert=function(c,d){return d=b.isModel(d)?d:new a(d),d.$parent=this.$parent,Array.prototype.splice.call(this,c,0,d),this.observer.notifySubscribers(),this},this.replace=function(c,d){return d=b.isModel(d)?d:new a(d),d.$parent=this.$parent,Array.prototype.splice.call(this,c,1,d),this.observer.notifySubscribers(),this},this.index=function(a){var b=-1;return this.each(function(c,d){return d===a?void(b=c):void 0}),b},this.from=function(a){var c=this;return b.isCollection(a)&&(a=a.raw()),d(a,function(a,b){c.has(a)?c.replace(a,b):c.replace(a,b)}),this},this.raw=function(){var a=[];return this.each(function(b,c){a.push(c.raw())}),a},this.each=function(a){for(var b=0;b<this.length;b++)a.call(this,b,this[b]);return this},this.find=function(a,c,e){var f=new this.$self.Model.Collection;return f.$parent=this.$parent,b.isModel(a)&&(a=a.raw()),"object"==typeof a&&(a=function(a){return function(){var b=this,c=!0;return d(a,function(a,d){return"undefined"==typeof b[a]||b[a]()!==d?(c=!1,!1):void 0}),c}}(a)),this.each(function(b,d){if(c&&e){var g=c*e-c;if(b>g)return}return a.call(d,b)&&f.append(d),c&&f.length===c?!1:void 0}),f},this.findOne=function(a){return this.find(a,1).first()},this["export"]=this.raw,this["import"]=this.from,this.from(c)};return c.Model=a,c.prototype={$self:c},c};var l={};b.set=function(a,b){return l[a]=b,this},b.get=function(a){return this.has(a)?l[a]:null},b.has=function(a){return"undefined"!=typeof l[a]},b.remove=function(a){return this.has(a)&&delete l[a],this},b.reset=function(){return l={},this},b.Event=function(){return this.stack=[],this},b.Event.prototype={bind:function(a){return this.stack.push(a),this},unbind:function(a){if(a){var b=[];for(var c in this.stack)this.stack[c]!==a&&b.push(this.stack[c]);this.stack=b}else this.stack=[];return this},trigger:function(a){for(var b in this.stack)if(this.stack[b].apply(this,a)===!1)return!1}},b.Events=function(){return this.events={},this},b.Events.prototype={on:function(a,c){return"undefined"==typeof this.events[a]&&(this.events[a]=new b.Event),this.events[a].bind(c),this},off:function(a,b){return a?("undefined"!=typeof this.events[a]&&this.events[a].unbind(b),this):(this.events={},this)},trigger:function(a,b){return"undefined"!=typeof this.events[a]&&this.events[a].trigger(b)===!1?!1:void 0}},b.element=document,b.run=function(a){a=a||this.element,"function"==typeof a&&(a=a()),"string"==typeof a&&(a=document.getElementById(a)),a!==document&&b.bindOne(a),b.bindDescendants(a)},b.bindOne=function(a){var b=this;d(a.attributes,function(c,d){if(0===d.name.indexOf(b.prefix)){var e=d.name.substring(b.prefix.length);"function"==typeof b.bindings[e]&&b.bindings[e].call(b,a,d.value)}})},b.bindDescendants=function(a){d(a.childNodes,function(a,c){b.run(c)})},b.attr=function(a,c,d){return c=b.prefix+c,"undefined"==typeof d?a.getAttribute?a.getAttribute(c):"undefined"==typeof a[c]?null:a[c]:d?(a.setAttribute?a.setAttribute(c,d):a[c]=d,this):(a.removeAttribute?a.removeAttribute(c):"undefined"!=typeof a[c]&&delete a[c],this)},b.outerHtml=function(a){var b=document.createElement("div");return b.appendChild(a),b.innerHTML},b.throwForElement=function(a,c){throw c+"\n"+b.outerHtml(a)},b.isReader=function(a){return 0===a.indexOf("read")},b.isWriter=function(a){return 0===a.indexOf("write")},b.toReader=function(a){return"read"+a.substring(0,1).toUpperCase()+a.substring(1)},b.toWriter=function(a){return"write"+a.substring(0,1).toUpperCase()+a.substring(1)},b.fromReader=function(a){return a.substring(4,5).toLowerCase()+a.substring(5)},b.fromWriter=function(a){return a.substring(5,6).toLowerCase()+a.substring(6)},b.isModel=function(a){return c(a,b.model().toString())},b.isCollection=function(a){return c(a,b.collection().toString())},b.model=function(a){var c=function(a){var e=this;this.clone=function(){var a=new c(this.raw());return a.$parent=this.$parent,a},this.from=function(a){if(b.isModel(a)){var c=a.raw();d(a.$self.computed,function(a){delete c[a]}),a=c}return d(a,function(a,b){"function"==typeof e[a]&&e[a](b)}),this.observer.notifySubscribers(),a!={}&&this.afterPopulate(a),this},this.afterPopulate=function(){},this.raw=function(){var a={};return d(e.$self.properties,function(b){a[b]=e[b]()}),d(e.$self.computed,function(b){a[b]=e[b]()}),d(e.$self.relations,function(b){a[b]=e[b]().raw()}),a},this.hasSameValue=function(){},this.reset=function(){return d(e.$self.properties,function(a,b){e[a](b)}),d(e.$self.relations,function(a,c){b.isCollection(c)?e[a]().empty():e[a]().reset()}),this},this["export"]=this.raw,this["import"]=this.from,g(this),this.from(a),"function"==typeof this.init&&this.init()};return c.Collection=b.collection(c),c.computed={},c.methods={},c.properties={},c.relations={},c.prototype.$self=c,c.extend=function(a){return a=b.isModel(a)?a:b.model(a),d(c.computed,function(b,c){"undefined"==typeof a.computed[b]&&(a.computed[b]=c)}),d(c.methods,function(b,c){"undefined"==typeof a.methods[b]&&(a.methods[b]=c)}),d(c.properties,function(b,c){"undefined"==typeof a.properties[b]&&(a.properties[b]=c)}),d(c.relations,function(b,c){"undefined"==typeof a.relations[b]&&(a.relations[b]=c)}),a},c.inherit=function(a){return a.extend(c)},f(c,a),c}});