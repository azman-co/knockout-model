!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(require("knockout"),module.exports||exports):"function"==typeof define&&define.amd?define(["knockout","exports"],a):a(ko,window.knockOutModel={})}(function(a){function b(a,b){return a?("object"==typeof a&&a.constructor&&(a=a.constructor),"function"==typeof a&&(a=a.toString()),a===b):!1}function c(a,b){if(a=a||[],"string"==typeof a&&(a=[a]),"number"==typeof a.length){for(var c=0;c<a.length;c++)if(b(c,a[c])===!1)return}else for(var d in a)if(b(d,a[d])===!1)return}function d(b){return a.computed({read:function(){return b},write:function(a){b.from(a)},owner:b})}function e(a,b){c(b,function(b,c){if(knockOutModel.isModel(c)||knockOutModel.isCollection(c))return void(a.relations[b]=c);if("function"==typeof c){var d,e;return knockOutModel.isReader(b)?(d=knockOutModel.fromReader(b),e="read"):knockOutModel.isWriter(b)&&(d=knockOutModel.fromWriter(b),e="write"),e?("undefined"==typeof a.computed[d]&&(a.computed[d]={}),void(a.computed[d][e]=c)):void(a.methods[b]=c)}a.properties[b]=c})}function f(a){a.observer=d(a),g(a),h(a),i(a),j(a)}function g(b){c(b.$self.computed,function(c,d){b[c]=a.computed({owner:b,deferEvaluation:!0,read:d.read||function(){},write:d.write||function(){}})})}function h(a){c(a.$self.methods,function(b,c){a[b]=function(){return c.apply(a,arguments)}})}function i(b){c(b.$self.properties,function(c,d){b[c]="[object Array]"===Object.prototype.toString.call(d)?a.observableArray(d):a.observable(d)})}function j(a){c(a.$self.relations,function(b,c){var d=new c;a[b]=d.observer,d.$parent=a})}if("undefined"==typeof a)throw"KnockoutJS is required. Download at https://github.com/SteveSanderson/knockout.";knockOutModel.bindings={model:function(b,c){this.attr(b,"view")||a.applyBindings(this.get(c),b)}},knockOutModel.collection=function(a){var b=function(b){Array.prototype.push.apply(this,[]),this.observer=d(this),this.aggregate=function(a,b){var d=[];return b||(b=[a],a=""),this.each(function(e,f){var g=[];c(b,function(a,b){"function"==typeof f[b]&&g.push(f[b]())}),d.push(g.join(a))}),d},this.at=function(a){return"undefined"==typeof this[a]?!1:this[a]},this.first=function(){return this.at(0)},this.last=function(){return this.at(this.length-1)},this.has=function(a){return"undefined"!=typeof this[a]},this.remove=function(a){return a="number"==typeof a?a:this.index(a),this.has(a)&&(Array.prototype.splice.call(this,a,1),this.observer.notifySubscribers()),this},this.empty=function(){return Array.prototype.splice.call(this,0,this.length),this.observer.notifySubscribers(),this},this.prepend=function(a){return this.insert(0,a)},this.append=function(a){return this.insert(this.length,a)},this.insert=function(b,c){return c=knockOutModel.isModel(c)?c:new a(c),c.$parent=this.$parent,Array.prototype.splice.call(this,b,0,c),this.observer.notifySubscribers(),this},this.replace=function(b,c){return c=knockOutModel.isModel(c)?c:new a(c),c.$parent=this.$parent,Array.prototype.splice.call(this,b,1,c),this.observer.notifySubscribers(),this},this.index=function(a){var b=-1;return this.each(function(c,d){return d===a?void(b=c):void 0}),b},this.from=function(a){var b=this;return knockOutModel.isCollection(a)&&(a=a.raw()),c(a,function(a,c){b.has(a)?b.replace(a,c):b.replace(a,c)}),this},this.raw=function(){var a=[];return this.each(function(b,c){a.push(c.raw())}),a},this.each=function(a){for(var b=0;b<this.length;b++)a.call(this,b,this[b]);return this},this.find=function(a,b,d){var e=new this.$self.Model.Collection;return e.$parent=this.$parent,knockOutModel.isModel(a)&&(a=a.raw()),"object"==typeof a&&(a=function(a){return function(){var b=this,d=!0;return c(a,function(a,c){return"undefined"==typeof b[a]||b[a]()!==c?(d=!1,!1):void 0}),d}}(a)),this.each(function(c,f){if(b&&d){var g=b*d-b;if(c>g)return}return a.call(f,c)&&e.append(f),b&&e.length===b?!1:void 0}),e},this.findOne=function(a){return this.find(a,1).first()},this["export"]=this.raw,this["import"]=this.from,this.from(b)};return b.Model=a,b.prototype={$self:b},b};var k={};knockOutModel.set=function(a,b){return k[a]=b,this},knockOutModel.get=function(a){return this.has(a)?k[a]:null},knockOutModel.has=function(a){return"undefined"!=typeof k[a]},knockOutModel.remove=function(a){return this.has(a)&&delete k[a],this},knockOutModel.reset=function(){return k={},this},knockOutModel.Event=function(){return this.stack=[],this},knockOutModel.Event.prototype={bind:function(a){return this.stack.push(a),this},unbind:function(a){if(a){var b=[];for(var c in this.stack)this.stack[c]!==a&&b.push(this.stack[c]);this.stack=b}else this.stack=[];return this},trigger:function(a){for(var b in this.stack)if(this.stack[b].apply(this,a)===!1)return!1}},knockOutModel.Events=function(){return this.events={},this},knockOutModel.Events.prototype={on:function(a,b){return"undefined"==typeof this.events[a]&&(this.events[a]=new knockOutModel.Event),this.events[a].bind(b),this},off:function(a,b){return a?("undefined"!=typeof this.events[a]&&this.events[a].unbind(b),this):(this.events={},this)},trigger:function(a,b){return"undefined"!=typeof this.events[a]&&this.events[a].trigger(b)===!1?!1:void 0}},knockOutModel.prefix="data-ku-",knockOutModel.element=document,knockOutModel.run=function(a){a=a||this.element,"function"==typeof a&&(a=a()),"string"==typeof a&&(a=document.getElementById(a)),a!==document&&knockOutModel.bindOne(a),knockOutModel.bindDescendants(a)},knockOutModel.bindOne=function(a){var b=this;c(a.attributes,function(c,d){if(0===d.name.indexOf(b.prefix)){var e=d.name.substring(b.prefix.length);"function"==typeof b.bindings[e]&&b.bindings[e].call(b,a,d.value)}})},knockOutModel.bindDescendants=function(a){c(a.childNodes,function(a,b){knockOutModel.run(b)})},knockOutModel.attr=function(a,b,c){return b=knockOutModel.prefix+b,"undefined"==typeof c?a.getAttribute?a.getAttribute(b):"undefined"==typeof a[b]?null:a[b]:c?(a.setAttribute?a.setAttribute(b,c):a[b]=c,this):(a.removeAttribute?a.removeAttribute(b):"undefined"!=typeof a[b]&&delete a[b],this)},knockOutModel.outerHtml=function(a){var b=document.createElement("div");return b.appendChild(a),b.innerHTML},knockOutModel.throwForElement=function(a,b){throw b+"\n"+knockOutModel.outerHtml(a)},knockOutModel.isReader=function(a){return 0===a.indexOf("read")},knockOutModel.isWriter=function(a){return 0===a.indexOf("write")},knockOutModel.toReader=function(a){return"read"+a.substring(0,1).toUpperCase()+a.substring(1)},knockOutModel.toWriter=function(a){return"write"+a.substring(0,1).toUpperCase()+a.substring(1)},knockOutModel.fromReader=function(a){return a.substring(4,5).toLowerCase()+a.substring(5)},knockOutModel.fromWriter=function(a){return a.substring(5,6).toLowerCase()+a.substring(6)},knockOutModel.isModel=function(a){return b(a,knockOutModel.model().toString())},knockOutModel.isCollection=function(a){return b(a,knockOutModel.collection().toString())},knockOutModel.model=function(a){var b=function(a){var d=this;this.clone=function(){var a=new b(this.raw());return a.$parent=this.$parent,a},this.from=function(a){if(knockOutModel.isModel(a)){var b=a.raw();c(a.$self.computed,function(a){delete b[a]}),a=b}return c(a,function(a,b){"function"==typeof d[a]&&d[a](b)}),this.observer.notifySubscribers(),this},this.raw=function(){var a={};return c(d.$self.properties,function(b){a[b]=d[b]()}),c(d.$self.computed,function(b){a[b]=d[b]()}),c(d.$self.relations,function(b){a[b]=d[b]().raw()}),a},this.hasSameValue=function(){},this.reset=function(){return c(d.$self.properties,function(a,b){d[a](b)}),c(d.$self.relations,function(a,b){knockOutModel.isCollection(b)?d[a]().empty():d[a]().reset()}),this},this["export"]=this.raw,this["import"]=this.from,f(this),this.from(a),"function"==typeof this.init&&this.init()};return b.Collection=knockOutModel.collection(b),b.computed={},b.methods={},b.properties={},b.relations={},b.prototype.$self=b,b.extend=function(a){return a=knockOutModel.isModel(a)?a:knockOutModel.model(a),c(b.computed,function(b,c){"undefined"==typeof a.computed[b]&&(a.computed[b]=c)}),c(b.methods,function(b,c){"undefined"==typeof a.methods[b]&&(a.methods[b]=c)}),c(b.properties,function(b,c){"undefined"==typeof a.properties[b]&&(a.properties[b]=c)}),c(b.relations,function(b,c){"undefined"==typeof a.relations[b]&&(a.relations[b]=c)}),a},b.inherit=function(a){return a.extend(b)},e(b,a),b}});